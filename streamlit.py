import streamlit as st

def simulate_job_application(input_iq):
    original_iq = 85
    hiring_threshold = 91
    undetectable_range = 15

    if input_iq < hiring_threshold:
        return "Вас не взяли на работу."
    elif input_iq > original_iq + undetectable_range:
        cost = 3 * (input_iq - original_iq)
        return f"Вы были уволены. Вы потратили {cost} рублей."
    else:
        earnings = 100 - 3 * (input_iq - original_iq)
        return f"Вас взяли на работу. Ваш доход составил {earnings} рублей."

# Заголовок приложения
st.title("Симуляция приема на работу")
st.header("Ваше IQ: 85")

# Описание игры
st.markdown("""
### Описание игры "Симуляция приема на работу"

Вам предстоит пройти собеседование в компанию, указав свой уровень IQ. Чем выше ваш IQ, тем больше шансов получить работу, но есть риск быть пойманным за фальсификацию.

**Условия**:
- За успешное прохождение собеседования вы получите 100 рублей.
- За каждый балл IQ выше исходного уровня вы заплатите 3 рубля.

**Возможные исходы**:
1. **Вас взяли на работу** — вы получите 100 рублей минус стоимость повышения IQ.
2. **Вас не взяли на работу** — вы ничего не заработаете.
3. **Вас уволили за фальсификацию** — вы потеряете деньги, потраченные на повышение IQ.

**Победитель** — тот, кого приняли на работу и у кого в итоге осталось больше всего денег.

Введите желаемый уровень IQ и нажмите "Проверить результат". У вас всего одна попытка!

Удачи!
""")

# Использование сессии для хранения попытки
if "attempt_made" not in st.session_state:
    st.session_state.attempt_made = False

# Если попытка еще не была сделана
if not st.session_state.attempt_made:
    # Ввод уровня IQ
    input_iq = st.number_input("Введите уровень IQ, который вы укажете на собеседовании:", min_value=50, max_value=150, step=1)

    # Кнопка для проверки результата
    if st.button("Проверить результат"):
        # Вычисление результата
        result = simulate_job_application(input_iq)
        # Отображение результата
        st.write(result)
        # Устанавливаем флаг, чтобы запретить повторный ввод
        st.session_state.attempt_made = True
else:
    st.write("Вы уже использовали свою попытку.")

